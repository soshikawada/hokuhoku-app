<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ほくほくルート - 施設選択</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;500;600;700&family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>施設選択</h1>
            <p>行きたい施設を選んで、右側のリストに追加してください</p>
        </header>

        <main class="facilities-main">
            <!-- 左側：施設一覧 -->
            <aside class="facilities-sidebar">
                <div class="page-actions">
                    <a href="index.html" class="btn btn-secondary">← 属性入力に戻る</a>
                    <a href="route.html" class="btn btn-primary">ルートマップを見る →</a>
                </div>

                <!-- 施設検索セクション -->
                <section class="search-section">
                    <h2>施設を検索して追加</h2>
                    <div class="search-box">
                        <input type="text" id="placeSearch" placeholder="施設名を入力してください">
                        <button id="searchBtn" class="btn btn-secondary">検索</button>
                    </div>
                    <div id="searchResults" class="search-results"></div>
                </section>

                <!-- おすすめ施設セクション -->
                <section class="recommendations-section">
                    <h2>おすすめ施設一覧</h2>
                    <p class="hint">行きたい施設にチェックを入れて、右側のリストに追加してください</p>
                    
                    <!-- 都道府県フィルター -->
                    <div class="prefecture-filter">
                        <label class="filter-label">都道府県で絞り込む：</label>
                        <div class="filter-options">
                            <label class="filter-checkbox">
                                <input type="checkbox" value="石川県" id="filter-ishikawa" checked>
                                <span>石川県</span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" value="富山県" id="filter-toyama" checked>
                                <span>富山県</span>
                            </label>
                            <label class="filter-checkbox">
                                <input type="checkbox" value="福井県" id="filter-fukui" checked>
                                <span>福井県</span>
                            </label>
                        </div>
                    </div>
                    
                    <div id="recommendations" class="recommendations-grid"></div>
                </section>

                <!-- その他の施設セクション -->
                <section class="other-facilities-section" id="otherFacilitiesSection" style="display: none;">
                    <h2>その他の施設（都道府県別）</h2>
                    <p class="hint">都道府県別に施設を表示しています</p>
                    <div id="otherFacilities" class="other-facilities-container"></div>
                </section>
            </aside>

            <!-- 右側：行きたいリスト -->
            <section class="wishlist-panel">
                <div class="wishlist-header">
                    <h2>行きたいリスト</h2>
                    <p class="hint">ドラッグ&ドロップで順番を変更できます</p>
                    <button id="clearWishlistBtn" class="btn btn-danger btn-small" style="display: none;">すべて削除</button>
                </div>
                
                <!-- 移動手段選択 -->
                <div class="travel-mode-selector">
                    <label for="travelMode" class="travel-mode-label">🚗 移動手段を選択</label>
                    <select id="travelMode" class="travel-mode-select">
                        <option value="DRIVING">🚗 車</option>
                        <option value="TRANSIT">🚃 電車・バス</option>
                        <option value="WALKING">🚶 徒歩</option>
                        <option value="BICYCLING">🚴 自転車</option>
                    </select>
                    <p class="hint travel-mode-hint">選択した移動手段でルートを計算します</p>
                </div>
                
                <div id="wishlist" class="wishlist"></div>
                <div class="wishlist-actions">
                    <button id="routeBtn" class="btn btn-primary" style="display: none;">ルートマップを見る</button>
                </div>
            </section>
        </main>
    </div>

    <!-- 設定ファイル -->
    <script src="js/config.js"></script>
    
    <!-- Google Maps API（動的に読み込む） -->
    <script id="google-maps-script"></script>
    
    <!-- アプリケーションスクリプト -->
    <script src="js/csvParser.js"></script>
    <script src="js/recommendation.js"></script>
    <script src="js/mapController.js"></script>
    <script src="js/dragDrop.js"></script>
    <script src="js/recommendationsPage.js"></script>
    
    <!-- Google Maps APIの動的読み込み -->
    <script>
        (function() {
            const apiKey = (typeof CONFIG !== 'undefined' && CONFIG.GOOGLE_MAPS_API_KEY) 
                ? CONFIG.GOOGLE_MAPS_API_KEY 
                : 'YOUR_API_KEY';
            
            if (apiKey === 'YOUR_API_KEY') {
                console.warn('Google Maps APIキーが設定されていません。js/config.jsファイルを確認してください。');
            }
            
            const script = document.getElementById('google-maps-script');
            script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&libraries=places&callback=initMapForRecommendations`;
            script.async = true;
            script.defer = true;
        })();
    </script>
</body>
</html>
