<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ほくほくルート - 属性入力</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;500;600;700&family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script>
        // オープニング画面にリダイレクト（初回のみ）
        // sessionStorageを使って、同じセッション内ではリダイレクトしない
        if (!sessionStorage.getItem('openingShown')) {
            sessionStorage.setItem('openingShown', 'true');
            window.location.href = 'opening/opening_2.html';
        }
    </script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ほくほくルート</h1>
            <p>あなたの属性に基づいて、おすすめの観光施設を提案します</p>
        </header>

        <main>
            <!-- 属性入力フォーム -->
            <section class="form-section">
                <h2>お客様の情報を入力してください</h2>
                <form id="userForm">
                    <div class="form-group">
                        <label>年代</label>
                        <div class="age-panel-group">
                            <div class="age-panel" data-age-category="若年層">
                                <input type="radio" name="age" value="若年層" id="age-young" required style="display: none;">
                                <label for="age-young" class="age-panel-label">
                                    <div class="age-panel-image">
                                        <span class="age-icon">🚀</span>
                                    </div>
                                    <div class="age-panel-content">
                                        <h3>若年層</h3>
                                        <p>10代・20代・30代</p>
                                    </div>
                                </label>
                            </div>
                            <div class="age-panel" data-age-category="中年層">
                                <input type="radio" name="age" value="中年層" id="age-middle" required style="display: none;">
                                <label for="age-middle" class="age-panel-label">
                                    <div class="age-panel-image">
                                        <span class="age-icon">🌳</span>
                                    </div>
                                    <div class="age-panel-content">
                                        <h3>中年層</h3>
                                        <p>40代・50代</p>
                                    </div>
                                </label>
                            </div>
                            <div class="age-panel" data-age-category="高齢層">
                                <input type="radio" name="age" value="高齢層" id="age-senior" required style="display: none;">
                                <label for="age-senior" class="age-panel-label">
                                    <div class="age-panel-image">
                                        <span class="age-icon">🦉</span>
                                    </div>
                                    <div class="age-panel-content">
                                        <h3>高齢層</h3>
                                        <p>60代以上</p>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>都道府県エリア</label>
                        <div class="age-panel-group prefecture-panel-group">
                            <div class="age-panel" data-prefecture-area="北海道・東北">
                                <input type="radio" name="prefectureArea" value="北海道・東北" id="area-hokkaido-tohoku" required style="display: none;">
                                <label for="area-hokkaido-tohoku" class="age-panel-label">
                                    <div class="age-panel-image">
                                        <span class="age-icon">❄️</span>
                                    </div>
                                    <div class="age-panel-content">
                                        <h3>北海道・東北</h3>
                                        <p>北海道、青森、岩手、宮城、秋田、山形、福島</p>
                                    </div>
                                </label>
                            </div>
                            <div class="age-panel" data-prefecture-area="関東">
                                <input type="radio" name="prefectureArea" value="関東" id="area-kanto" required style="display: none;">
                                <label for="area-kanto" class="age-panel-label">
                                    <div class="age-panel-image">
                                        <span class="age-icon">🏙️</span>
                                    </div>
                                    <div class="age-panel-content">
                                        <h3>関東</h3>
                                        <p>茨城、栃木、群馬、埼玉、千葉、東京、神奈川</p>
                                    </div>
                                </label>
                            </div>
                            <div class="age-panel" data-prefecture-area="中部">
                                <input type="radio" name="prefectureArea" value="中部" id="area-chubu" required style="display: none;">
                                <label for="area-chubu" class="age-panel-label">
                                    <div class="age-panel-image">
                                        <span class="age-icon">🏔️</span>
                                    </div>
                                    <div class="age-panel-content">
                                        <h3>中部</h3>
                                        <p>新潟、富山、石川、福井、山梨、長野、岐阜、静岡、愛知、三重</p>
                                    </div>
                                </label>
                            </div>
                            <div class="age-panel" data-prefecture-area="関西">
                                <input type="radio" name="prefectureArea" value="関西" id="area-kansai" required style="display: none;">
                                <label for="area-kansai" class="age-panel-label">
                                    <div class="age-panel-image">
                                        <span class="age-icon">🏯</span>
                                    </div>
                                    <div class="age-panel-content">
                                        <h3>関西</h3>
                                        <p>滋賀、京都、大阪、兵庫、奈良、和歌山</p>
                                    </div>
                                </label>
                            </div>
                            <div class="age-panel" data-prefecture-area="中国・四国">
                                <input type="radio" name="prefectureArea" value="中国・四国" id="area-chugoku-shikoku" required style="display: none;">
                                <label for="area-chugoku-shikoku" class="age-panel-label">
                                    <div class="age-panel-image">
                                        <span class="age-icon">🌊</span>
                                    </div>
                                    <div class="age-panel-content">
                                        <h3>中国・四国</h3>
                                        <p>鳥取、島根、岡山、広島、山口、徳島、香川、愛媛、高知</p>
                                    </div>
                                </label>
                            </div>
                            <div class="age-panel" data-prefecture-area="九州・沖縄">
                                <input type="radio" name="prefectureArea" value="九州・沖縄" id="area-kyushu-okinawa" required style="display: none;">
                                <label for="area-kyushu-okinawa" class="age-panel-label">
                                    <div class="age-panel-image">
                                        <span class="age-icon">🌴</span>
                                    </div>
                                    <div class="age-panel-content">
                                        <h3>九州・沖縄</h3>
                                        <p>福岡、佐賀、長崎、熊本、大分、宮崎、鹿児島、沖縄</p>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>同伴者</label>
                        <div class="age-panel-group companion-panel-group">
                            <div class="age-panel" data-companion-category="ひとり旅">
                                <input type="radio" name="companion" value="ひとり旅" id="companion-alone" required style="display: none;">
                                <label for="companion-alone" class="age-panel-label">
                                    <div class="age-panel-image">
                                        <span class="age-icon">🚶</span>
                                    </div>
                                    <div class="age-panel-content">
                                        <h3>ひとり旅</h3>
                                        <p>自分ひとり</p>
                                    </div>
                                </label>
                            </div>
                            <div class="age-panel" data-companion-category="カップル">
                                <input type="radio" name="companion" value="カップル" id="companion-couple" required style="display: none;">
                                <label for="companion-couple" class="age-panel-label">
                                    <div class="age-panel-image">
                                        <span class="age-icon">💑</span>
                                    </div>
                                    <div class="age-panel-content">
                                        <h3>カップル</h3>
                                        <p>恋人、夫婦2人</p>
                                    </div>
                                </label>
                            </div>
                            <div class="age-panel" data-companion-category="友人・同僚">
                                <input type="radio" name="companion" value="友人・同僚" id="companion-friends" required style="display: none;">
                                <label for="companion-friends" class="age-panel-label">
                                    <div class="age-panel-image">
                                        <span class="age-icon">👥</span>
                                    </div>
                                    <div class="age-panel-content">
                                        <h3>友人・同僚</h3>
                                        <p>友人、職場の同僚</p>
                                    </div>
                                </label>
                            </div>
                            <div class="age-panel" data-companion-category="家族">
                                <input type="radio" name="companion" value="家族" id="companion-family" required style="display: none;">
                                <label for="companion-family" class="age-panel-label">
                                    <div class="age-panel-image">
                                        <span class="age-icon">👨‍👩‍👧‍👦</span>
                                    </div>
                                    <div class="age-panel-content">
                                        <h3>家族</h3>
                                        <p>子ども連れの家族</p>
                                    </div>
                                </label>
                            </div>
                            <div class="age-panel" data-companion-category="親族・団体">
                                <input type="radio" name="companion" value="親族・団体" id="companion-group" required style="display: none;">
                                <label for="companion-group" class="age-panel-label">
                                    <div class="age-panel-image">
                                        <span class="age-icon">👨‍👩‍👧‍👦</span>
                                    </div>
                                    <div class="age-panel-content">
                                        <h3>親族・団体</h3>
                                        <p>親、親戚、団体旅行</p>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>訪問目的</label>
                        <div class="age-panel-group purpose-panel-group">
                            <div class="age-panel" data-purpose-category="リラックス・温泉">
                                <input type="radio" name="purpose" value="リラックス・温泉" id="purpose-relax" required style="display: none;">
                                <label for="purpose-relax" class="age-panel-label">
                                    <div class="age-panel-image">
                                        <span class="age-icon">♨️</span>
                                    </div>
                                    <div class="age-panel-content">
                                        <h3>リラックス・温泉</h3>
                                        <p>宿でのんびり、温泉</p>
                                    </div>
                                </label>
                            </div>
                            <div class="age-panel" data-purpose-category="グルメ・買い物">
                                <input type="radio" name="purpose" value="グルメ・買い物" id="purpose-food" required style="display: none;">
                                <label for="purpose-food" class="age-panel-label">
                                    <div class="age-panel-image">
                                        <span class="age-icon">🍜</span>
                                    </div>
                                    <div class="age-panel-content">
                                        <h3>グルメ・買い物</h3>
                                        <p>地元の美味しいもの、買い物</p>
                                    </div>
                                </label>
                            </div>
                            <div class="age-panel" data-purpose-category="自然・アウトドア">
                                <input type="radio" name="purpose" value="自然・アウトドア" id="purpose-nature" required style="display: none;">
                                <label for="purpose-nature" class="age-panel-label">
                                    <div class="age-panel-image">
                                        <span class="age-icon">⛰️</span>
                                    </div>
                                    <div class="age-panel-content">
                                        <h3>自然・アウトドア</h3>
                                        <p>自然鑑賞、アウトドア、スポーツ</p>
                                    </div>
                                </label>
                            </div>
                            <div class="age-panel" data-purpose-category="観光・文化">
                                <input type="radio" name="purpose" value="観光・文化" id="purpose-sightseeing" required style="display: none;">
                                <label for="purpose-sightseeing" class="age-panel-label">
                                    <div class="age-panel-image">
                                        <span class="age-icon">🏛️</span>
                                    </div>
                                    <div class="age-panel-content">
                                        <h3>観光・文化</h3>
                                        <p>名所、テーマパーク、イベント、体験</p>
                                    </div>
                                </label>
                            </div>
                            <div class="age-panel" data-purpose-category="その他">
                                <input type="radio" name="purpose" value="その他" id="purpose-other" required style="display: none;">
                                <label for="purpose-other" class="age-panel-label">
                                    <div class="age-panel-image">
                                        <span class="age-icon">📋</span>
                                    </div>
                                    <div class="age-panel-content">
                                        <h3>その他</h3>
                                        <p>出張、訪問など</p>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary">レコメンド実行</button>
                </form>
            </section>
        </main>
    </div>

    <!-- アプリケーションスクリプト -->
    <script src="js/csvParser.js"></script>
    <script src="js/recommendation.js"></script>
    <script src="js/formHandler.js"></script>
    <script>
        // 年代選択パネルと都道府県エリア選択パネルのインタラクション
        document.addEventListener('DOMContentLoaded', () => {
            // 年代選択パネル
            const agePanels = document.querySelectorAll('.age-panel[data-age-category]');
            const ageInputs = document.querySelectorAll('input[name="age"]');
            
            ageInputs.forEach(input => {
                input.addEventListener('change', () => {
                    // すべての年代パネルからselectedクラスを削除
                    agePanels.forEach(panel => {
                        panel.classList.remove('selected');
                    });
                    
                    // 選択されたパネルにselectedクラスを追加
                    const selectedPanel = input.closest('.age-panel');
                    if (selectedPanel) {
                        selectedPanel.classList.add('selected');
                    }
                });
            });

            // 都道府県エリア選択パネル
            const prefecturePanels = document.querySelectorAll('.age-panel[data-prefecture-area]');
            const prefectureInputs = document.querySelectorAll('input[name="prefectureArea"]');
            
            prefectureInputs.forEach(input => {
                input.addEventListener('change', () => {
                    // すべての都道府県パネルからselectedクラスを削除
                    prefecturePanels.forEach(panel => {
                        panel.classList.remove('selected');
                    });
                    
                    // 選択されたパネルにselectedクラスを追加
                    const selectedPanel = input.closest('.age-panel');
                    if (selectedPanel) {
                        selectedPanel.classList.add('selected');
                    }
                });
            });

            // 同伴者選択パネル
            const companionPanels = document.querySelectorAll('.age-panel[data-companion-category]');
            const companionInputs = document.querySelectorAll('input[name="companion"]');
            
            companionInputs.forEach(input => {
                input.addEventListener('change', () => {
                    // すべての同伴者パネルからselectedクラスを削除
                    companionPanels.forEach(panel => {
                        panel.classList.remove('selected');
                    });
                    
                    // 選択されたパネルにselectedクラスを追加
                    const selectedPanel = input.closest('.age-panel');
                    if (selectedPanel) {
                        selectedPanel.classList.add('selected');
                    }
                });
            });

            // 訪問目的選択パネル
            const purposePanels = document.querySelectorAll('.age-panel[data-purpose-category]');
            const purposeInputs = document.querySelectorAll('input[name="purpose"]');
            
            purposeInputs.forEach(input => {
                input.addEventListener('change', () => {
                    // すべての訪問目的パネルからselectedクラスを削除
                    purposePanels.forEach(panel => {
                        panel.classList.remove('selected');
                    });
                    
                    // 選択されたパネルにselectedクラスを追加
                    const selectedPanel = input.closest('.age-panel');
                    if (selectedPanel) {
                        selectedPanel.classList.add('selected');
                    }
                });
            });
        });
    </script>
</body>
</html>
